{"version":3,"sources":[null,"webpack:///C:/Users/Administrator/Desktop/hub/多端开发/poster-editor/components/poster/poster.vue?a44b","webpack:///C:/Users/Administrator/Desktop/hub/多端开发/poster-editor/components/poster/poster.vue?7bda","webpack:///C:/Users/Administrator/Desktop/hub/多端开发/poster-editor/components/poster/poster.vue?6f19","uni-app:///components/poster/poster.vue","webpack:///C:/Users/Administrator/Desktop/hub/多端开发/poster-editor/components/poster/poster.vue?7a7a","webpack:///C:/Users/Administrator/Desktop/hub/多端开发/poster-editor/components/poster/poster.vue?7d5a"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACa;;;AAGlE;AACyK;AACzK,gBAAgB,+KAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAonB,CAAgB,0nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACQxoB;AACA,qBADA;AAEA,MAFA,kBAEA;AACA;AACA,gBADA;AAEA,wBAFA;;AAIA,GAPA;AAQA;AACA,gBADA,wBACA,QADA,EACA;AACA;AADA,2BAEA,aAFA,CAEA,MAFA,kBAEA,MAFA,CAEA,QAFA,kBAEA,OAFA;AAGA;AAHA,kCAIA,oBAJA,CAIA,KAJA,yBAIA,KAJA,CAIA,MAJA,yBAIA,MAJA,EAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SADA,GACA,IADA,CACA,MADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBADA,EACA;AACA,kCAFA,EAEA;AACA,2BAHA,EAGA;AACA,4BAJA,CADA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAlEA;;AAoEA,OAtEA;;AAwEA;;AAEA;AACA;AACA,4BADA,EACA;AACA,iBAFA,mBAEA,GAFA,EAEA;AACA;AACA,WAJA;AAKA,cALA,gBAKA,GALA,EAKA;AACA;AACA,WAPA;AAQA,aARA;;AAUA,OAXA,EAWA,GAXA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,KA/GA,EARA,E;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA84B,CAAgB,m3BAAG,EAAC,C;;;;;;;;;;;ACAl6B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/poster/poster.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./poster.vue?vue&type=template&id=50acffa4&\"\nvar renderjs\nimport script from \"./poster.vue?vue&type=script&lang=js&\"\nexport * from \"./poster.vue?vue&type=script&lang=js&\"\nimport style0 from \"./poster.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/poster/poster.vue\"\nexport default component.exports","export * from \"-!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./poster.vue?vue&type=template&id=50acffa4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./poster.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!-- hideCanvas -->\n\t<view class=\"hideCanvas\">\r\n\t\t<canvas  canvas-id=\"poster\" :style=\"{ width: (poster.width || 1) + 'px', height: (poster.height || 1) + 'px' }\"></canvas>\t\t\t  \r\n\t</view>\n</template>\n\n<script>\n\texport default {\r\n\t\tprops:['pageInfo'],\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tposter:{},\r\n\t\t\t\tcanvasId:'poster'\n\t\t\t};\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tcreatePoster(callback){\r\n\t\t\t\t// 页面信息\r\n\t\t\t\tconst {detail,content:contents} = this.pageInfo\r\n\t\t\t\t// 背景图片宽高\r\n\t\t\t\tconst {width,height}  = this.pageInfo.detail//await this.getClientRect('#bgImage')\r\n\t\t\t\t// 海报\r\n\t\t\t\tlet context = uni.createCanvasContext(this.canvasId)\r\n\t\t\t\t// 设置canvas的宽和高\r\n\t\t\t\tthis.$set(this.poster,'width',width)\r\n\t\t\t\tthis.$set(this.poster,'height',height)\r\n\t\t\t\t// 绘制背景\r\n\t\t\t\tcontext.drawImage(detail.backgroundImage, 0, 0, width, height)\r\n\t\t\t\t\r\n\t\t\t\tcontents.forEach((item)=>{\r\n\t\t\t\t\tconst {detail:d} = item\r\n\t\t\t\t\tswitch(item.type){\r\n\t\t\t\t\t\tcase 'text':\r\n\t\t\t\t\t\t\tcontext.setFillStyle(d.color)\r\n\t\t\t\t\t\t\tcontext.setFontSize(d.fontSize)\r\n\t\t\t\t\t\t\t// 默认加上20不然高度不对\r\n\t\t\t\t\t\t\tcontext.fillText(d.content,d.x,d.y + 20)\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tcase 'img':\r\n\t\t\t\t\t\t\tlet x = d.x, // x轴\r\n\t\t\t\t\t\t\t\ty = d.y, // y轴\r\n\t\t\t\t\t\t\t\tr = d.borderRadius/2, // 10 圆角大小\r\n\t\t\t\t\t\t\t\tw = d.width / 2, // 宽\r\n\t\t\t\t\t\t\t\th = d.height / 2 // 高\r\n\t\t\t\t\t\t\t// 先保存状态 已便于画完圆再用\r\n\t\t\t\t\t\t\tcontext.save()\r\n\t\t\t\t\t\t\t //开始绘制\r\n\t\t\t\t\t\t\tcontext.beginPath()\r\n\t\t\t\t\t\t\t// 先画个圆\r\n\t\t\t\t\t\t\t// x:图片坐标+图片宽度/2/2 ,\r\n\t\t\t\t\t\t\t// y坐标:图片坐标+图片高度/2/2\r\n\t\t\t\t\t\t\t// 半径：图片高度/2/2 \r\n\t\t\t\t\t\t\t// ----------------\r\n\t\t\t\t\t\t\t// context.arc(d.x+d.width/2/2,  d.y+d.height/2/2, d.height/2/2, 0, Math.PI * 2);\r\n\t\t\t\t\t\t\t// context.setFillStyle('red')\r\n\t\t\t\t\t\t\t// // 保证图片无bug填充\r\n\t\t\t\t\t\t\t// context.fill()\r\n\t\t\t\t\t\t\t// // 画了圆 再剪切 原始画布中剪切任意形状和尺寸。一旦剪切了某个区域，则所有之后的绘图都会被限制在被剪切的区域内\r\n\t\t\t\t\t\t\t// context.clip()\r\n\t\t\t\t\t\t\t// ----------------\r\n\t\t\t\t\t\t\tcontext.setFillStyle('transparent')\r\n\t\t\t\t\t\t\t// 左上角\r\n\t\t\t\t\t\t\tcontext.arc(x + r, y + r, r, Math.PI, Math.PI * 1.5)\r\n\t\t\t\t\t\t\t// border-top\r\n\t\t\t\t\t\t\tcontext.moveTo(x + r, y)\r\n\t\t\t\t\t\t\tcontext.lineTo(x + w - r, y)\r\n\t\t\t\t\t\t\tcontext.lineTo(x + w, y + r)\r\n\t\t\t\t\t\t\t// 右上角\r\n\t\t\t\t\t\t\tcontext.arc(x + w - r, y + r, r, Math.PI * 1.5, Math.PI * 2)\r\n\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t// border-right\r\n\t\t\t\t\t\t\tcontext.lineTo(x + w, y + h - r)\r\n\t\t\t\t\t\t\tcontext.lineTo(x + w - r, y + h)\r\n\t\t\t\t\t\t\t// 右下角\r\n\t\t\t\t\t\t\tcontext.arc(x + w - r, y + h - r, r, 0, Math.PI * 0.5)\r\n\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t// border-bottom\r\n\t\t\t\t\t\t\tcontext.lineTo(x + r, y + h)\r\n\t\t\t\t\t\t\tcontext.lineTo(x, y + h - r)\r\n\t\t\t\t\t\t\t// 左下角\r\n\t\t\t\t\t\t\tcontext.arc(x + r, y + h - r, r, Math.PI * 0.5, Math.PI)\r\n\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t// border-left\r\n\t\t\t\t\t\t\tcontext.lineTo(x, y + r)\r\n\t\t\t\t\t\t\tcontext.lineTo(x + r, y)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcontext.fill()\r\n\t\t\t\t\t\t\tcontext.closePath()\r\n\t\t\t\t\t\t\t// 剪切\r\n\t\t\t\t\t\t\tcontext.clip()\r\n\t\t\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\tcontext.drawImage(d.url,d.x,d.y,d.width / 2,d.height / 2)\r\n\t\t\t\t\t\t\t// 恢复之前保存的绘图上下文\r\n\t\t\t\t\t\t\tcontext.restore() \r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tcontext.draw()\r\n\t\t\t\t\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\t\tcanvasId:'poster', //this.canvasId,\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tcallback && callback(res)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},this)\r\n\t\t\t\t\t\r\n\t\t\t\t},300)\r\n\t\t\t\t// context.draw(false,wx.canvasToTempFilePath({\r\n\t\t\t\t// \t  canvasId: 'poster',\r\n\t\t\t\t// \t  success: function (res) {\r\n\t\t\t\t// \t\tcallback && callback(res)\r\n\t\t\t\t// \t  },\r\n\t\t\t\t// \t  fail: function (err) {\r\n\t\t\t\t// \t\tconsole.log(err);\r\n\t\t\t\t// \t  }\r\n\t\t\t\t// }this))\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t}\n\t}\n</script>\n\n<style>\n\t.hideCanvas {\r\n\t\tposition: fixed;\r\n\t\ttop: -99999upx;\r\n\t\tleft: -99999upx;\r\n\t\tz-index: -99999;\r\n\t}\n</style>\n","import mod from \"-!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./poster.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./poster.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1604040393951\n      var cssReload = require(\"D:/工具/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}