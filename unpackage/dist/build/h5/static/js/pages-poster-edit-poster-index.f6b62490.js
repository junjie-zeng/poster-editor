(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-poster-edit-poster-index"],{"05ed":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"drag-poster"},[n("v-uni-view",{staticClass:"poster",style:{width:"auto"==t.pageInfo.detail.width?"auto":t.pageInfo.detail.width+"px",height:"auto"==t.pageInfo.detail.height?"auto":t.pageInfo.detail.height+"px",backgroundColor:t.pageInfo.detail.background},attrs:{id:"image-box"}},[n("v-uni-image",{attrs:{src:t.pageInfo.detail.backgroundImage,mode:"widthFix"}})],1),n("v-uni-view",{staticClass:"drag"},[n("v-uni-movable-area",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.currentIndex=-1}}},t._l(t.pageInfo.content,(function(e,i){return n("v-uni-movable-view",{key:i,class:["target",t.currentIndex==i?"sl":""],attrs:{direction:"all",animation:"false",scale:"true",x:e.detail.x,y:e.detail.y},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.currentIndex=i},change:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.updateRect(e,i,"change ...")},scale:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.updateScale(e,i,"scale ...")}}},["text"==e.type?n("v-uni-view",{staticClass:"text",style:{fontSize:e.detail.fontSize+"px",color:e.detail.color,fontFamily:e.detail.fontFamily},attrs:{contenteditable:t.isContenteditable}},[t._v(t._s(e.detail.content))]):t._e(),"img"==e.type?n("v-uni-view",{staticClass:"img",style:{width:e.detail.width+"rpx",height:e.detail.height+"rpx",borderRadius:e.detail.borderRadius+"%",overflow:"hidden",backgroundColor:e.detail.bgColor}},[n("v-uni-image",{attrs:{src:e.detail.url,name:e.detail.url}})],1):t._e(),t.currentIndex==i?n("v-uni-view",[n("v-uni-view",{staticClass:"operator-item edit-ele",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.editItem(i)}}},[n("v-uni-view",{staticClass:" iconfont icon-bianji"})],1),n("v-uni-view",{staticClass:"operator-item del-ele",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.del(i)}}},[n("v-uni-view",{staticClass:" iconfont icon-shanchu"})],1),n("v-uni-view",{staticClass:"operator-item copy-ele",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.copy(i)}}},[n("v-uni-view",{staticClass:" iconfont icon-fuzhi-"})],1)],1):t._e()],1)})),1)],1)],1)},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},"063a":function(t,e,n){"use strict";n.r(e);var i=n("f427"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"0d57":function(t,e,n){"use strict";n.r(e);var i=n("35f1"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"0de7":function(t,e,n){"use strict";n.r(e);var i=n("60b2"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"1c6a":function(t,e,n){"use strict";n.r(e);var i=n("5654"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"1da0":function(t,e,n){"use strict";n.r(e);var i=n("bd8a"),a=n("61b0");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var r,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"63a4f57b",null,!1,i["a"],r);e["default"]=c.exports},"1e42":function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("e143")),o=new a.default;e.default=o},"25a9":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"hideCanvas"},[n("v-uni-canvas",{style:{width:(t.poster.width||1)+"px",height:(t.poster.height||1)+"px"},attrs:{"canvas-id":"poster"}})],1)},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},"29e4":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"ps-create-poster"},[n("v-uni-view",{staticClass:"ps-create-box"},[n("v-uni-view",{staticClass:"poster-heder"},[n("v-uni-text",{staticClass:"iconfont icon-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$modal("ps-create-poster-modal","close")}}})],1),t.posterUrl?n("v-uni-view",{staticClass:"poster-body"},[n("v-uni-image",{attrs:{src:t.posterUrl,mode:"widthFix"}})],1):t._e(),n("v-uni-view",{staticClass:"poster-info"},[n("v-uni-view",{staticClass:"title"},[t._v("提示：长按保存图片")]),n("v-uni-view",{staticClass:"pi-name"},[n("v-uni-input",{attrs:{type:"text",placeholder:"请输入海报名称"},model:{value:t.posterName,callback:function(e){t.posterName=e},expression:"posterName"}})],1)],1),n("v-uni-view",{staticClass:"poster-footer"},[n("v-uni-view",{staticClass:"ps-col-50"},[n("v-uni-view",{staticClass:"ps-btn ps-btn-lg ps-btn-blue",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveLocal.apply(void 0,arguments)}}},[t._v("保存本地")])],1),n("v-uni-view",{staticClass:"ps-col-50"},[n("v-uni-view",{staticClass:"ps-btn ps-btn-lg ps-btn-blue-line",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$modal("ps-create-poster-modal","close")}}},[t._v("取消")])],1)],1)],1)],1)},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},"2f3a":function(t,e,n){"use strict";n.r(e);var i=n("3ee0"),a=n("e0d6");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var r,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"035ca302",null,!1,i["a"],r);e["default"]=c.exports},"32d0":function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("e143")),o=new a.default;e.default=o},"35f1":function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("f3f3")),o=i(n("468e")),r=i(n("7a98")),s=i(n("bf01")),c=n("2f62"),u={mixins:[o.default,r.default,s.default],methods:(0,a.default)({},(0,c.mapActions)(["addContent"]),{add:function(t){var e=null;switch(t){case"text":e={id:0,type:"text",detail:{x:20,y:20,fontSize:20,content:"Nike",color:"rgba(0,0,0,1)",fontFamily:"微软雅黑"}};break;case"img":e={id:2,type:"img",detail:{x:20,y:20,width:100,height:100,url:"../../../static/image/nike.jpg",borderRadius:10,bgColor:"rgba(255,192,203,1)"}};break}this.addContent(e),this.$drawer("add-content-drawer","close")}})};e.default=u},"38c7":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".hideCanvas[data-v-1891ebb7]{position:fixed;top:%?-99999?%;left:%?-99999?%;z-index:-99999}",""]),t.exports=e},"38f0":function(t,e,n){"use strict";n.r(e);var i=n("05ed"),a=n("0de7");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var r,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"01297bdc",null,!1,i["a"],r);e["default"]=c.exports},"3ee0":function(t,e,n){"use strict";var i={uniDrawer:n("1c36").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("appHeader",{attrs:{option:"back",title:t.pageInfo.name}}),n("v-uni-view",{staticClass:"ps-opertion-btn"},[n("v-uni-view",{staticClass:"setting",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.operation.apply(void 0,arguments)}}},[n("v-uni-view",{}),t._v("+")],1)],1),n("drag"),n("uniPopup",{ref:"ps-setting-modal"},[n("operation-setting-modal")],1),n("uniPopup",{ref:"ps-create-poster-modal"},[n("create-poster-modal",{attrs:{currentEditType:t.currentEditType}})],1),n("uni-drawer",{ref:"add-content-drawer",attrs:{mode:"left"}},[n("add-content-drawer")],1),n("uni-drawer",{ref:"edit-content-drawer",attrs:{mode:"right"}},[n("edit-content-drawer")],1),n("uni-drawer",{ref:"bg-set-drawer",attrs:{mode:"left"}},[n("background-set-drawer")],1)],1)},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},"3eee":function(t,e,n){"use strict";n.r(e);var i=n("d6e4"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"468e":function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("32d0")),o={data:function(){return{}},onLoad:function(t){},methods:{close:function(t,e,n){a.default.$emit(t,{key:e,status:n})},open:function(t,e,n){a.default.$emit(t,{key:e,status:n})}}};e.default=o},"46b3":function(t,e,n){var i=n("38c7");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("9bec4e7c",i,!0,{sourceMap:!1,shadowMode:!1})},5654:function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var a=i(n("c964")),o=i(n("f3f3")),r=i(n("468e")),s=i(n("7a98")),c=i(n("e25a")),u=i(n("bf01")),l=(i(n("cc2e")),n("f170"),n("2f62")),d={mixins:[r.default,s.default,c.default,u.default],computed:(0,o.default)({},(0,l.mapState)(["pageInfo"])),methods:(0,o.default)({},(0,l.mapActions)(["updateContent","setPosterUrl"]),{open:function(){this.$drawer("add-content-drawer","open"),this._closeSettingModal()},backgroundSetting:function(){this.$drawer("bg-set-drawer","open"),this._closeSettingModal()},handleCreatePoster:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var n,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return uni.showLoading({title:"正在生成"}),e.prev=1,e.next=4,t.getClientRect("#image-box");case 4:n=e.sent,i=n.width,a=n.height,console.log(i,a),t.updateContent({key:"width",value:i}),t.updateContent({key:"height",value:a}),t.$refs.poster.createPoster(t.pageInfo,(function(e){uni.hideLoading(),t.setPosterUrl(e.tempFilePath),t._closeSettingModal(),t.$modal("ps-create-poster-modal","open")})),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),console.log("create poster ...",e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))()},_closeSettingModal:function(){this.$modal("ps-setting-modal","close")}})};e.default=d},"5cf7":function(t,e,n){"use strict";n.r(e);var i=n("c8c8"),a=n("1c6a");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var r,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"065de7b3",null,!1,i["a"],r);e["default"]=c.exports},6075:function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var a=i(n("c964")),o=i(n("f3f3")),r=n("2f62"),s=i(n("468e")),c=i(n("7a98")),u=i(n("e25a")),l=i(n("bf01")),d=i(n("688b")),f=i(n("38f0")),v=i(n("5cf7")),h=i(n("aee1")),p=i(n("da6a")),g=i(n("1da0")),b=i(n("cdaa")),w=i(n("c442")),m={mixins:[s.default,c.default,u.default,l.default,d.default],data:function(){return{testUrl:"",currentEditType:"",color:{r:255,g:0,b:0,a:.6}}},computed:(0,o.default)({},(0,r.mapState)(["pageInfo"])),onLoad:function(t){var e=t.id,n=t.type;this.getPageInfo(e),this.currentEditType=n},mounted:function(){},methods:(0,o.default)({},(0,r.mapActions)(["updateContent","getPageInfo"]),{operation:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.modal("ps-setting-modal","open");case 1:case"end":return e.stop()}}),e)})))()},confirm:function(t){console.log("颜色选择器返回值："+t.hex),this.modifyCurrentItem("color",t.hex)}}),components:{drag:f.default,operationSettingModal:v.default,createPosterModal:h.default,addContentDrawer:p.default,editContentDrawer:g.default,backgroundSetDrawer:b.default,tColorPicker:w.default}};e.default=m},"60b2":function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("f3f3")),o=i(n("468e")),r=i(n("7a98")),s=i(n("e25a")),c=i(n("bf01")),u=n("2f62"),l={mixins:[o.default,r.default,s.default,c.default],data:function(){return{fontWeightIndex:0,fontWeightArray:[1,2,3],touchStartTime:0,isContenteditable:!1,currentIndex:-1}},computed:(0,a.default)({},(0,u.mapState)(["pageInfo"])),mounted:function(){},methods:(0,a.default)({},(0,u.mapActions)(["changeCoordinate","setEditIndex","delContent","copyContent","scaleElement"]),{editItem:function(t){this.setEditIndex(t),this.$drawer("edit-content-drawer","open"),this.currentIndex=t},updateRect:function(t,e,n){var i=t.detail,a=i.x,o=i.y,r=i.source;r&&"touch"==r&&(console.log({x:a,y:o,source:r}),this.changeCoordinate({index:e,x:a,y:o})),this.currentIndex=e},updateScale:function(t){var e=t.detail;e.x,e.y,e.scale;console.log(t)},del:function(t){this.delContent(t)},copy:function(t){this.copyContent(t)}})};e.default=l},"61b0":function(t,e,n){"use strict";n.r(e);var i=n("b2e1"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"627e":function(t,e,n){"use strict";var i=n("46b3"),a=n.n(i);a.a},"688b":function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("1e42")),o={data:function(){return{}},mounted:function(){var t=this;a.default.$on("colorPicker",(function(e){var n=e.e,i=e.type;t.showColorPicker(n,i)}))},methods:{showColorPicker:function(t,e){this.$refs[t]&&this.$refs[t][e]()},$showColorPicker:function(t,e){console.log("$showColorPicker ..."),a.default.$emit("colorPicker",{e:t,type:e})}},destroyed:function(){}};e.default=o},"7a98":function(t,e,n){"use strict";n("d3b7"),n("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={methods:{getClientRect:function(t){return new Promise((function(e){uni.createSelectorQuery().selectAll(t).boundingClientRect((function(t){e(t[0])})).exec()}))}}};e.default=i},"7b4b":function(t,e,n){"use strict";var i=n("ee27");n("a15b"),n("d81d"),n("b6802"),n("d3b7"),n("e25e"),n("ac1f"),n("25f0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("d0af")),o={props:{color:{type:Object,default:function(){return{r:0,g:0,b:0,a:0}}},spareColor:{type:Array,default:function(){return[]}}},data:function(){return{show:!1,active:!1,rgba:{r:0,g:0,b:0,a:1},hsb:{h:0,s:0,b:0},site:[{top:0,left:0},{left:0},{left:0}],index:0,bgcolor:{r:255,g:0,b:0,a:1},hex:"#000000",mode:!0,colorList:[{r:244,g:67,b:54,a:1},{r:233,g:30,b:99,a:1},{r:156,g:39,b:176,a:1},{r:103,g:58,b:183,a:1},{r:63,g:81,b:181,a:1},{r:33,g:150,b:243,a:1},{r:3,g:169,b:244,a:1},{r:0,g:188,b:212,a:1},{r:0,g:150,b:136,a:1},{r:76,g:175,b:80,a:1},{r:139,g:195,b:74,a:1},{r:205,g:220,b:57,a:1},{r:255,g:235,b:59,a:1},{r:255,g:193,b:7,a:1},{r:255,g:152,b:0,a:1},{r:255,g:87,b:34,a:1},{r:121,g:85,b:72,a:1},{r:158,g:158,b:158,a:1},{r:0,g:0,b:0,a:.5},{r:0,g:0,b:0,a:0}]}},created:function(){this.rgba=this.color,0!==this.spareColor.length&&(this.colorList=this.spareColor)},methods:{init:function(){this.hsb=this.rgbToHex(this.rgba),this.setValue(this.rgba)},moveHandle:function(){},open:function(){var t=this;this.show=!0,this.$nextTick((function(){t.init(),setTimeout((function(){t.active=!0,setTimeout((function(){t.getSelectorQuery()}),350)}),50)}))},close:function(){var t=this;this.active=!1,this.$nextTick((function(){setTimeout((function(){t.show=!1}),500)}))},confirm:function(){this.close(),this.$emit("confirm",{rgba:this.rgba,hex:this.hex})},select:function(){this.mode=!this.mode},selectColor:function(t){this.setColorBySelect(t)},touchstart:function(t,e){var n=t.touches[0],i=n.pageX,a=n.pageY;this.pageX=i,this.pageY=a,this.setPosition(i,a,e)},touchmove:function(t,e){var n=t.touches[0],i=n.pageX,a=n.pageY;this.moveX=i,this.moveY=a,this.setPosition(i,a,e)},touchend:function(t,e){},setPosition:function(t,e,n){this.index=n;var i=this.position[n],a=i.top,o=i.left,r=i.width,s=i.height;this.site[n].left=Math.max(0,Math.min(parseInt(t-o),r)),0===n?(this.site[n].top=Math.max(0,Math.min(parseInt(e-a),s)),this.hsb.s=parseInt(100*this.site[n].left/r),this.hsb.b=parseInt(100-100*this.site[n].top/s),this.setColor(),this.setValue(this.rgba)):this.setControl(n,this.site[n].left)},setColor:function(){var t=this.HSBToRGB(this.hsb);this.rgba.r=t.r,this.rgba.g=t.g,this.rgba.b=t.b},setValue:function(t){this.hex="#"+this.rgbToHex(t)},setControl:function(t,e){var n=this.position[t],i=(n.top,n.left,n.width);n.height;1===t?(this.hsb.h=parseInt(360*e/i),this.bgcolor=this.HSBToRGB({h:this.hsb.h,s:100,b:100}),this.setColor()):this.rgba.a=(e/i).toFixed(1),this.setValue(this.rgba)},rgbToHex:function(t){var e=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return e.map((function(t,n){1==t.length&&(e[n]="0"+t)})),e.join("")},setColorBySelect:function(t){var e=t.r,n=t.g,i=t.b,a=t.a,o={};o={r:e?parseInt(e):0,g:n?parseInt(n):0,b:i?parseInt(i):0,a:a||0},this.rgba=o,this.hsb=this.rgbToHsb(o),this.changeViewByHsb()},changeViewByHsb:function(){var t=(0,a.default)(this.position,3),e=t[0],n=t[1],i=t[2];this.site[0].left=parseInt(this.hsb.s*e.width/100),this.site[0].top=parseInt((100-this.hsb.b)*e.height/100),this.setColor(this.hsb.h),this.setValue(this.rgba),this.bgcolor=this.HSBToRGB({h:this.hsb.h,s:100,b:100}),this.site[1].left=this.hsb.h/360*n.width,this.site[2].left=this.rgba.a*i.width},HSBToRGB:function(t){var e={},n=Math.round(t.h),i=Math.round(255*t.s/100),a=Math.round(255*t.b/100);if(0==i)e.r=e.g=e.b=a;else{var o=a,r=(255-i)*a/255,s=n%60*(o-r)/60;360==n&&(n=0),n<60?(e.r=o,e.b=r,e.g=r+s):n<120?(e.g=o,e.b=r,e.r=o-s):n<180?(e.g=o,e.r=r,e.b=r+s):n<240?(e.b=o,e.r=r,e.g=o-s):n<300?(e.b=o,e.g=r,e.r=r+s):n<360?(e.r=o,e.g=r,e.b=o-s):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},rgbToHsb:function(t){var e={h:0,s:0,b:0},n=Math.min(t.r,t.g,t.b),i=Math.max(t.r,t.g,t.b),a=i-n;return e.b=i,e.s=0!=i?255*a/i:0,0!=e.s?t.r==i?e.h=(t.g-t.b)/a:t.g==i?e.h=2+(t.b-t.r)/a:e.h=4+(t.r-t.g)/a:e.h=-1,e.h*=60,e.h<0&&(e.h=0),e.s*=100/255,e.b*=100/255,e},getSelectorQuery:function(){var t=this,e=uni.createSelectorQuery().in(this);e.selectAll(".boxs").boundingClientRect((function(e){e&&0!==e.length?(t.position=e,t.setColorBySelect(t.rgba)):setTimeout((function(){return t.getSelectorQuery()}),20)})).exec()}},watch:{spareColor:function(t){this.colorList=t}}};e.default=o},"8e6b":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".t-wrapper[data-v-57e82076]{position:fixed;top:0;bottom:0;left:0;width:100%;box-sizing:border-box;z-index:9999}.t-box[data-v-57e82076]{width:100%;position:absolute;bottom:0;top:%?90?%;padding:%?30?% 0;padding-top:0;background:#fff;-webkit-transition:all .3s;transition:all .3s;-webkit-transform:translateY(100%);transform:translateY(100%)}.t-box.active[data-v-57e82076]{-webkit-transform:translateY(0);transform:translateY(0)}.t-header[data-v-57e82076]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;width:100%;height:%?100?%;border-bottom:1px #eee solid;box-shadow:1px 0 2px rgba(0,0,0,.1);background:#fff}.t-header-button[data-v-57e82076]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?150?%;height:%?100?%;font-size:%?30?%;color:#666;padding-left:%?20?%}.t-header-button[data-v-57e82076]:last-child{-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;padding-right:%?20?%}.t-mask[data-v-57e82076]{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);z-index:-1;-webkit-transition:all .3s;transition:all .3s;opacity:0}.t-mask.active[data-v-57e82076]{opacity:1}.t-color__box[data-v-57e82076]{position:relative;height:%?400?%;background:red;overflow:hidden;box-sizing:border-box;margin:0 %?20?%;margin-top:%?20?%;box-sizing:border-box}.t-background[data-v-57e82076]{position:absolute;top:0;left:0;right:0;bottom:0;background:-webkit-linear-gradient(left,#fff,hsla(0,0%,100%,0));background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.t-color-mask[data-v-57e82076]{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:%?400?%;background:-webkit-linear-gradient(bottom,#000,transparent);background:linear-gradient(0deg,#000,transparent)}.t-pointer[data-v-57e82076]{position:absolute;bottom:-8px;left:-8px;z-index:2;width:15px;height:15px;border:1px #fff solid;border-radius:50%}.t-show-color[data-v-57e82076]{width:%?100?%;height:%?50?%}.t-control__box[data-v-57e82076]{margin-top:%?50?%;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;padding-left:%?20?%;box-sizing:border-box}.t-control__color[data-v-57e82076]{-webkit-flex-shrink:0;flex-shrink:0;width:%?100?%;height:%?100?%;border-radius:50%;background-color:#fff;background-image:-webkit-linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee),-webkit-linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee);background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee);background-size:%?36?% %?36?%;background-position:0 0,%?18?% %?18?%;border:1px #eee solid;overflow:hidden}.t-control__color-content[data-v-57e82076]{width:100%;height:100%}.t-control-box__item[data-v-57e82076]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;width:100%;padding:0 %?30?%}.t-controller[data-v-57e82076]{position:relative;width:100%;height:16px;background-color:#fff;background-image:-webkit-linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee),-webkit-linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee);background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee);background-size:%?32?% %?32?%;background-position:0 0,%?16?% %?16?%}.t-hue[data-v-57e82076]{width:100%;height:100%;background:-webkit-linear-gradient(left,red,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red);background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.t-transparency[data-v-57e82076]{width:100%;height:100%;background:-webkit-linear-gradient(left,transparent,#000);background:linear-gradient(90deg,transparent 0,#000)}.t-circle[data-v-57e82076]{position:absolute;\n\t/* right: -10px; */top:-2px;width:20px;height:20px;box-sizing:border-box;border-radius:50%;background:#fff;box-shadow:0 0 2px 1px rgba(0,0,0,.1)}.t-result__box[data-v-57e82076]{margin-top:%?20?%;padding:%?10?%;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;box-sizing:border-box}.t-result__item[data-v-57e82076]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:%?10?%;width:100%;box-sizing:border-box}.t-result__box-input[data-v-57e82076]{padding:%?10?% 0;width:100%;font-size:%?28?%;box-shadow:0 0 1px 1px rgba(0,0,0,.1);color:#999;text-align:center;background:#fff}.t-result__box-text[data-v-57e82076]{margin-top:%?10?%;font-size:%?28?%;line-height:2}.t-select[data-v-57e82076]{-webkit-flex-shrink:0;flex-shrink:0;width:%?150?%;padding:0 %?30?%}.t-select .t-result__box-input[data-v-57e82076]{border-radius:%?10?%;border:none;color:#999;box-shadow:1px 1px 2px 1px rgba(0,0,0,.1);background:#fff}.t-select .t-result__box-input[data-v-57e82076]:active{box-shadow:0 0 1px 0 rgba(0,0,0,.1)}.t-alternative[data-v-57e82076]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;width:100%;padding-top:%?30?%;padding-right:%?25?%;box-sizing:border-box}.t-alternative__item[data-v-57e82076]{margin-left:%?12?%;margin-top:%?10?%;width:%?50?%;height:%?50?%;border-radius:%?10?%;background-color:#fff;background-image:-webkit-linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee),-webkit-linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee);background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0,#eee);background-size:%?36?% %?36?%;background-position:0 0,%?18?% %?18?%;border:1px #eee solid;overflow:hidden}.t-alternative__item-content[data-v-57e82076]{width:%?50?%;height:%?50?%;background:rgba(255,0,0,.5)}.t-alternative__item[data-v-57e82076]:active{-webkit-transition:all .3s;transition:all .3s;-webkit-transform:scale(1.1);transform:scale(1.1)}",""]),t.exports=e},"96cf":function(t,e){!function(e){"use strict";var n,i=Object.prototype,a=i.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"===typeof t,l=e.regeneratorRuntime;if(l)u&&(t.exports=l);else{l=e.regeneratorRuntime=u?t.exports:{},l.wrap=y;var d="suspendedStart",f="suspendedYield",v="executing",h="completed",p={},g={};g[r]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(M([])));w&&w!==i&&a.call(w,r)&&(g=w);var m=_.prototype=C.prototype=Object.create(g);k.prototype=m.constructor=_,_.constructor=k,_[c]=k.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(m),t},l.awrap=function(t){return{__await:t}},I($.prototype),$.prototype[s]=function(){return this},l.AsyncIterator=$,l.async=function(t,e,n,i){var a=new $(y(t,e,n,i));return l.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},I(m),m[c]="Generator",m[r]=function(){return this},m.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},l.values=M,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,a){return s.type="throw",s.arg=t,e.next=i,a&&(e.method="next",e.arg=n),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],s=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var c=a.call(r,"catchLoc"),u=a.call(r,"finallyLoc");if(c&&u){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var a=i.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:M(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=n),p}}}function y(t,e,n,i){var a=e&&e.prototype instanceof C?e:C,o=Object.create(a.prototype),r=new T(i||[]);return o._invoke=E(t,n,r),o}function x(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(i){return{type:"throw",arg:i}}}function C(){}function k(){}function _(){}function I(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function $(t){function e(n,i,o,r){var s=x(t[n],t,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"===typeof u&&a.call(u,"__await")?Promise.resolve(u.__await).then((function(t){e("next",t,o,r)}),(function(t){e("throw",t,o,r)})):Promise.resolve(u).then((function(t){c.value=t,o(c)}),(function(t){return e("throw",t,o,r)}))}r(s.arg)}var n;function i(t,i){function a(){return new Promise((function(n,a){e(t,i,n,a)}))}return n=n?n.then(a,a):a()}this._invoke=i}function E(t,e,n){var i=d;return function(a,o){if(i===v)throw new Error("Generator is already running");if(i===h){if("throw"===a)throw o;return O()}n.method=a,n.arg=o;while(1){var r=n.delegate;if(r){var s=P(r,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=v;var c=x(t,e,n);if("normal"===c.type){if(i=n.done?h:f,c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=h,n.method="throw",n.arg=c.arg)}}}function P(t,e){var i=t.iterator[e.method];if(i===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,P(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=x(i,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,p;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function M(t){if(t){var e=t[r];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function e(){while(++i<t.length)if(a.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:O}}function O(){return{value:n,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},"97c3":function(t,e,n){"use strict";n.r(e);var i=n("ba5a"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},9908:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"t-wrapper",on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.moveHandle.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"t-mask",class:{active:t.active},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"t-box",class:{active:t.active}},[n("v-uni-view",{staticClass:"t-header"},[n("v-uni-view",{staticClass:"t-header-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}},[t._v("取消")]),n("v-uni-view",{staticClass:"t-header-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[t._v("确认")])],1),n("v-uni-view",{staticClass:"t-color__box",style:{background:"rgb("+t.bgcolor.r+","+t.bgcolor.g+","+t.bgcolor.b+")"}},[n("v-uni-view",{staticClass:"t-background boxs",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchstart(e,0)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.touchmove(e,0)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchend(e,0)}}},[n("v-uni-view",{staticClass:"t-color-mask"}),n("v-uni-view",{staticClass:"t-pointer",style:{top:t.site[0].top-8+"px",left:t.site[0].left-8+"px"}})],1)],1),n("v-uni-view",{staticClass:"t-control__box"},[n("v-uni-view",{staticClass:"t-control__color"},[n("v-uni-view",{staticClass:"t-control__color-content",style:{background:"rgba("+t.rgba.r+","+t.rgba.g+","+t.rgba.b+","+t.rgba.a+")"}})],1),n("v-uni-view",{staticClass:"t-control-box__item"},[n("v-uni-view",{staticClass:"t-controller boxs",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchstart(e,1)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.touchmove(e,1)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchend(e,1)}}},[n("v-uni-view",{staticClass:"t-hue"},[n("v-uni-view",{staticClass:"t-circle",style:{left:t.site[1].left-12+"px"}})],1)],1),n("v-uni-view",{staticClass:"t-controller boxs",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchstart(e,2)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.touchmove(e,2)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchend(e,2)}}},[n("v-uni-view",{staticClass:"t-transparency"},[n("v-uni-view",{staticClass:"t-circle",style:{left:t.site[2].left-12+"px"}})],1)],1)],1)],1),n("v-uni-view",{staticClass:"t-alternative"},t._l(t.colorList,(function(e,i){return n("v-uni-view",{key:i,staticClass:"t-alternative__item"},[n("v-uni-view",{staticClass:"t-alternative__item-content",style:{background:"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.selectColor(e)}}})],1)})),1)],1)],1)},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},ab6f:function(t,e,n){"use strict";n.r(e);var i=n("7b4b"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},abf5:function(t,e,n){"use strict";var i=n("da6e"),a=n.n(i);a.a},aee1:function(t,e,n){"use strict";n.r(e);var i=n("29e4"),a=n("3eee");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var r,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"9adccdfe",null,!1,i["a"],r);e["default"]=c.exports},b1f1:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"ps-add-content-box"},[n("v-uni-view",{staticClass:"content-th"},[n("v-uni-view",{staticClass:"th-title"},[t._v("添加元素")]),n("v-uni-view",{staticClass:"iconfont icon-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$drawer("add-content-drawer","close")}}})],1),n("v-uni-view",{staticClass:"content-td"},[n("v-uni-view",{staticClass:"td-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.add("text")}}},[n("v-uni-view",{staticClass:"iconfont icon-wenzi1"}),n("v-uni-view",{staticClass:"text"},[t._v("文字")])],1),n("v-uni-view",{staticClass:"td-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.add("img")}}},[n("v-uni-view",{staticClass:"iconfont icon-tupian"}),n("v-uni-view",{staticClass:"text"},[t._v("图片")])],1)],1)],1)},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},b2e1:function(t,e,n){"use strict";var i=n("ee27");n("c740"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("f3f3")),o=i(n("468e")),r=i(n("7a98")),s=i(n("bf01")),c=i(n("688b")),u=n("2f62"),l=n("f170"),d=i(n("c442")),f={mixins:[o.default,r.default,s.default,c.default],data:function(){return{font:{fontWeightIndex:0,fontWeightArray:["宋体","新宋体","微软雅黑","楷体","黑体","隶书","Arial","Verdana","Times New Roman","Lucida Sans Unicode","MS Serif","Comic Sans MS"]},currentItem:null,colorList:["#000000","#ffffff","#ff1d20","#ffaa00","#ffff00","#55ff00","#0565ff","#55ffff","#8800ff"],color:{rgba:{r:48,g:8,b:8,a:.6},key:""}}},computed:(0,a.default)({},(0,u.mapState)(["editIndex","pageInfo"])),mounted:function(){this._initCurrentItem()},methods:(0,a.default)({},(0,u.mapActions)(["updateContentDetail"]),{bindFontWeight:function(t){this.font.fontWeightIndex=t.target.value;var e=this.font.fontWeightArray[this.font.fontWeightIndex];this.updateContentDetail({key:"fontFamily",value:e})},modifyCurrentItem:function(t,e){this.updateContentDetail({key:t,value:e})},openColorPicker:function(){this.$showColorPicker("colorPicker","open")},confirmColor:function(t){var e=(0,l.getRgbaColor)(t.rgba),n=this.color.key;this.color.rgba=t.rgba,this.modifyCurrentItem(n,e)},sliderChange:function(t,e){var n=t.detail.value;this.updateContentDetail({key:e,value:n})},onKeyInput:function(t,e){var n=t.detail.value;this.updateContentDetail({key:e,value:n})},chooseImage:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){(0,l.blobToBase64)(e.tempFiles[0],(function(e){t.currentItem.detail.url=e,t.updateContentDetail({key:"url",value:e})}))}})},delImage:function(){this.modifyCurrentItem("url",""),this.currentItem.detail.url=""},_initCurrentItem:function(){this.currentItem=this.pageInfo.content[this.editIndex];var t=this.currentItem.type;if("text"==t){var e=this.currentItem.detail,n=e.fontFamily,i=e.color;this.font.fontWeightIndex=this.font.fontWeightArray.findIndex((function(t,e){return t==n})),this.color.rgba=(0,l.splitRgbaColor)(i),this.color.key="color"}else if("img"==t){var a=this.currentItem.detail,o=(a.url,a.bgColor);this.color.rgba=(0,l.splitRgbaColor)(o),this.color.key="bgColor"}}}),components:{tColorPicker:d.default}};e.default=f},b626:function(t,e,n){"use strict";var i={tColorPicker:n("c442").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"bg-set-box"},[n("v-uni-view",{staticClass:"content-th"},[n("v-uni-view",{staticClass:"th-title"},[t._v("背景设置")]),n("v-uni-view",{staticClass:"iconfont icon-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$drawer("bg-set-drawer","close")}}})],1),t.pageInfo?n("v-uni-view",{staticClass:"content-td"},[n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("背景颜色")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-view",{staticClass:"colors"},[n("v-uni-view",{staticClass:"color-item",style:{background:"rgba("+t.color.rgba.r+","+t.color.rgba.g+","+t.color.rgba.b+","+t.color.rgba.a+")"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openColorPicker.apply(void 0,arguments)}}})],1)],1)],1),n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("背景图片")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-view",{staticClass:"set-image"},[t.pageInfo.detail.backgroundImage?n("v-uni-image",{attrs:{src:t.pageInfo.detail.backgroundImage,mode:"widthFix"}}):n("v-uni-view",{staticClass:"not-img iconfont icon-tupian"}),n("v-uni-view",{staticClass:"set-image-btn"},[n("v-uni-view",{staticClass:"iconfont icon-shangchuantupian",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleUpdateBgColor.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"iconfont icon-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClearBgColor.apply(void 0,arguments)}}})],1)],1)],1)],1)],1):t._e(),n("t-color-picker",{ref:"bgColorPicker",attrs:{color:t.color.rgba},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmColor.apply(void 0,arguments)}}})],1)},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},ba5a:function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("f3f3")),o=i(n("468e")),r=i(n("7a98")),s=i(n("bf01")),c=i(n("688b")),u=n("2f62"),l=i(n("c442")),d=n("f170"),f={mixins:[o.default,r.default,s.default,c.default],data:function(){return{color:{rgba:{r:48,g:8,b:8,a:.6},key:""}}},computed:(0,a.default)({},(0,u.mapState)(["pageInfo"])),mounted:function(){console.log("mounted .."),this._initBgColor()},methods:(0,a.default)({},(0,u.mapActions)(["updateContent"]),{openColorPicker:function(){this.$showColorPicker("bgColorPicker","open")},confirmColor:function(t){var e=(0,d.getRgbaColor)(t.rgba);this.color.rgba=t.rgba,this.updateContent({key:"background",value:e})},handleUpdateBgColor:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){(0,d.blobToBase64)(e.tempFiles[0],(function(e){t.updateContent({key:"backgroundImage",value:e}),t.updateContent({key:"width",value:"auto"}),t.updateContent({key:"height",value:"auto"})}))}})},handleClearBgColor:function(){this.updateContent({key:"backgroundImage",value:""})},_initBgColor:function(){var t=this.pageInfo.detail;this.color.rgba=(0,d.splitRgbaColor)(t.background)}}),components:{tColorPicker:l.default}};e.default=f},bd8a:function(t,e,n){"use strict";var i={tColorPicker:n("c442").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"ps-edit-content-box"},[n("v-uni-view",{staticClass:"content-th"},[n("v-uni-view",{staticClass:"th-title"},[t._v("编辑元素")]),n("v-uni-view",{staticClass:"iconfont icon-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$drawer("add-content-drawer","close")}}})],1),n("v-uni-view",{staticClass:"content-td"},[t.currentItem&&"text"==t.currentItem.type?n("v-uni-view",[n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("颜色")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-view",{staticClass:"colors"},[n("v-uni-view",{staticClass:"color-item",style:{background:"rgba("+t.color.rgba.r+","+t.color.rgba.g+","+t.color.rgba.b+","+t.color.rgba.a+")"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openColorPicker.apply(void 0,arguments)}}})],1)],1)],1),n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("文字")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-input",{attrs:{value:t.currentItem.detail.content,"confirm-type":"search",placeholder:"请输入文本/文本不能为空"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onKeyInput(e,"content")}}})],1)],1),n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("大小")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-slider",{attrs:{value:t.currentItem.detail.fontSize,min:"12",max:"88","show-value":!0,step:"5"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.sliderChange(e,"fontSize")}}})],1)],1),n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("字体")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-view",{staticClass:"set-font-weight"},[n("v-uni-picker",{attrs:{value:t.font.fontWeightIndex,range:t.font.fontWeightArray},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindFontWeight.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.font.fontWeightArray[t.font.fontWeightIndex]))])],1)],1)],1)],1)],1):t._e(),t.currentItem&&"img"==t.currentItem.type?n("v-uni-view",[n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("背景颜色")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-view",{staticClass:"colors"},[n("v-uni-view",{staticClass:"color-item",style:{background:"rgba("+t.color.rgba.r+","+t.color.rgba.g+","+t.color.rgba.b+","+t.color.rgba.a+")"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openColorPicker.apply(void 0,arguments)}}})],1)],1)],1),n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("圆角")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-slider",{attrs:{value:t.currentItem.detail.borderRadius,min:"0",max:"50","show-value":!0,step:"5"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.sliderChange(e,"borderRadius")}}})],1)],1),n("v-uni-view",{staticClass:"ps-edit-item"},[n("v-uni-view",{staticClass:"top"},[t._v("图片")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-view",{staticClass:"set-image"},[t.currentItem.detail.url?n("v-uni-image",{attrs:{src:t.currentItem.detail.url,mode:"widthFix"}}):n("v-uni-view",{staticClass:"not-img iconfont icon-tupian"}),n("v-uni-view",{staticClass:"set-image-btn"},[n("v-uni-view",{staticClass:"iconfont icon-shangchuantupian",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"iconfont icon-close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delImage.apply(void 0,arguments)}}})],1)],1)],1)],1)],1):t._e()],1),n("t-color-picker",{ref:"colorPicker",attrs:{color:t.color.rgba},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmColor.apply(void 0,arguments)}}})],1)},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},bf01:function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("1e42")),o={data:function(){return{}},mounted:function(){var t=this;a.default.$on("drawer",(function(e){var n=e.e,i=e.type;t.drawer(n,i)}))},methods:{drawer:function(t,e){this.$refs[t]&&this.$refs[t][e]()},$drawer:function(t,e){console.log("$drawer ..."),a.default.$emit("drawer",{e:t,type:e})}},destroyed:function(){}};e.default=o},c442:function(t,e,n){"use strict";n.r(e);var i=n("9908"),a=n("ab6f");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("abf5");var r,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"57e82076",null,!1,i["a"],r);e["default"]=c.exports},c8c8:function(t,e,n){"use strict";var i={poster:n("cc2e").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"ps-setting-box "},[n("v-uni-view",{staticClass:"setting-left"},[n("v-uni-view",{staticClass:"left-item"},[n("v-uni-view",{staticClass:"yuan",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.backgroundSetting.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"iconfont icon-background"})],1),n("v-uni-text",{staticClass:"desc"},[t._v("背景设置")])],1),n("v-uni-view",{staticClass:"left-item"},[n("v-uni-view",{staticClass:"yuan",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.open.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"iconfont icon-3jichuyuansu"})],1),n("v-uni-text",{staticClass:"desc"},[t._v("添加元素")])],1),n("v-uni-view",{staticClass:"left-item"},[n("v-uni-view",{staticClass:"yuan delbg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$modal("ps-setting-modal","close")}}},[n("v-uni-text",{staticClass:"iconfont icon-close "})],1)],1)],1),n("v-uni-view",{staticClass:"setting-right"},[n("v-uni-view",{staticClass:"right-item"},[n("v-uni-view",{staticClass:"yuan",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleCreatePoster.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"iconfont icon-ok"})],1),n("v-uni-text",{staticClass:"desc"},[t._v("生成海报")])],1)],1),n("poster",{ref:"poster",attrs:{pageInfo:t.pageInfo}})],1)},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},c964:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return a}));n("d3b7"),n("e6cf");function i(t,e,n,i,a,o,r){try{var s=t[o](r),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(i,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var r=t.apply(e,n);function s(t){i(r,a,o,s,c,"next",t)}function c(t){i(r,a,o,s,c,"throw",t)}s(void 0)}))}}},cb29:function(t,e,n){var i=n("23e7"),a=n("81d5"),o=n("44d2");i({target:"Array",proto:!0},{fill:a}),o("fill")},cc2e:function(t,e,n){"use strict";n.r(e);var i=n("25a9"),a=n("063a");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("627e");var r,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"1891ebb7",null,!1,i["a"],r);e["default"]=c.exports},cdaa:function(t,e,n){"use strict";n.r(e);var i=n("b626"),a=n("97c3");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var r,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"1a41b717",null,!1,i["a"],r);e["default"]=c.exports},d0af:function(t,e,n){"use strict";function i(t){if(Array.isArray(t))return t}n.r(e);n("a4d3"),n("e01a"),n("d28b"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");function a(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done);i=!0)if(n.push(r.value),e&&n.length===e)break}catch(c){a=!0,o=c}finally{try{i||null==s["return"]||s["return"]()}finally{if(a)throw o}}return n}}var o=n("dde1");function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){return i(t)||a(t,e)||Object(o["a"])(t,e)||r()}n.d(e,"default",(function(){return s}))},d6e4:function(t,e,n){"use strict";var i=n("ee27");n("4160"),n("a434"),n("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("f3f3")),o=i(n("468e")),r=i(n("7a98")),s=i(n("e25a")),c=n("2f62"),u={mixins:[o.default,r.default,s.default],props:{currentEditType:{default:"new",type:String}},data:function(){return{posterName:""}},mounted:function(){this.posterName=this.pageInfo.name},computed:(0,a.default)({},(0,c.mapState)(["posterUrl","pageInfo"])),methods:{saveLocal:function(){var t=localStorage.getItem("localPageList"),e=JSON.parse(JSON.stringify(this.pageInfo)),n=[];if(this.posterName){if(t){if(n=JSON.parse(t),n.length>5)return void uni.showToast({title:"本地最多保存2张海报",icon:"none"})}else n=[];"new"==this.currentEditType?(e.id=Date.now(),e.type="my"):n.forEach((function(t,i){var a=t.id;a==e.id&&(e.id=t.id,e.type=t.type,n.splice(i,1))})),e.url=this.posterUrl,e.name=this.posterName,n.push(e),console.log(e);try{localStorage.setItem("localPageList",JSON.stringify(n)),uni.showToast({title:"保存成功",icon:"success",success:function(){console.log("success"),uni.switchTab({url:"/pages/index/works/works"})}})}catch(i){uni.showToast({title:"保存失败，内容超出",icon:"none"})}}else uni.showToast({title:"海报名称不能为空",icon:"none"})}}};e.default=u},da6a:function(t,e,n){"use strict";n.r(e);var i=n("b1f1"),a=n("0d57");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var r,s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"6ca9ce10",null,!1,i["a"],r);e["default"]=c.exports},da6e:function(t,e,n){var i=n("8e6b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("10da6ac5",i,!0,{sourceMap:!1,shadowMode:!1})},e0d6:function(t,e,n){"use strict";n.r(e);var i=n("6075"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},e25a:function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("1e42")),o={data:function(){return{}},mounted:function(){var t=this;a.default.$on("popup",(function(e){var n=e.e,i=e.type;t.modal(n,i)}))},methods:{modal:function(t,e){this.$refs[t]&&this.$refs[t][e]()},$modal:function(t,e){console.log("$modal ..."),a.default.$emit("popup",{e:t,type:e})}},destroyed:function(){}};e.default=o},f170:function(t,e,n){"use strict";n("99af"),n("ac1f"),n("466d"),Object.defineProperty(e,"__esModule",{value:!0}),e.splitRgbaColor=e.getRgbaColor=e.blobToBase64=void 0;var i=function(t,e){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){var t=n.result;e&&e(t)}};e.blobToBase64=i;var a=function(t){var e=t.r,n=t.g,i=t.b,a=t.a;return"rgba(".concat(e,",").concat(n,",").concat(i,",").concat(a,")")};e.getRgbaColor=a;var o=function(t){var e,n,i,a,o=t.match(/[\d.]+/g);if(o.length>=3)return e=o[0],n=o[1],i=o[2],a=o[3]||1,{r:e,g:n,b:i,a:a}};e.splitRgbaColor=o},f427:function(t,e,n){"use strict";n("99af"),n("cb29"),n("4160"),n("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{poster:{},canvasId:"poster"}},methods:{createPoster:function(t,e){var n=this,i=t.detail,a=t.content,o=i.width,r=i.height;console.log(o,r);var s=uni.createCanvasContext(this.canvasId);this.$set(this.poster,"width",o),this.$set(this.poster,"height",r),i.backgroundImage&&s.drawImage(i.backgroundImage,0,0,o,r),i.backgroundImage||(s.drawImage("../../../static/image/default.png",0,0,0,0),s.setFillStyle(i.background),s.fillRect(0,0,o,r)),a.forEach((function(t){var e=t.detail;switch(t.type){case"text":s.setFillStyle(e.color),s.font="".concat(e.fontSize,"px ").concat(e.fontFamily),s.fillText(e.content,e.x,e.y+20);break;case"img":var n=e.x,i=e.y,a=e.borderRadius/2,o=e.width/2,r=e.height/2;s.save(),s.beginPath(),s.setFillStyle("transparent"),s.arc(n+a,i+a,a,Math.PI,1.5*Math.PI),s.moveTo(n+a,i),s.lineTo(n+o-a,i),s.lineTo(n+o,i+a),s.arc(n+o-a,i+a,a,1.5*Math.PI,2*Math.PI),s.lineTo(n+o,i+r-a),s.lineTo(n+o-a,i+r),s.arc(n+o-a,i+r-a,a,0,.5*Math.PI),s.lineTo(n+a,i+r),s.lineTo(n,i+r-a),s.arc(n+a,i+r-a,a,.5*Math.PI,Math.PI),s.lineTo(n,i+a),s.lineTo(n+a,i),s.fill(),s.closePath(),s.clip(),e.url?s.drawImage(e.url,e.x,e.y,e.width/2,e.height/2):(s.setFillStyle(e.bgColor),s.fillRect(e.x,e.y,e.width/2,e.height/2)),s.restore();break;default:break}})),s.draw(!1,(function(){uni.canvasToTempFilePath({canvasId:"poster",success:function(t){e&&e(t)},fail:function(t){console.log(t)}},n)}))}}};e.default=i}}]);